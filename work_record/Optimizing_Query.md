# Optimizing Query

### inintail query
``` sql
SELECT
    SLP.ACUNIT_CD, SLP.SLP_NO, SLP.SLP_LNO, SLP.SLP_TP_CD, SLP.SLP_JOUR_TP_CD, SLP.ACNT_CD,
    SLP.CRNCY_CD, SLP.DR_AMT, SLP.CR_AMT, SLP.COMP_CRNCY_CD, SLP.COMP_CRNCY_DR_AMT, SLP.COMP_CRNCY_CR_AMT,
    SLP.APRV_DT, SLP.REG_DTTM, SLP.MOD_DTTM,
    TO_DATE(SLP.SLP_DT, 'YYYYMMDD') AS SLP_DT,
   
    ACUNIT.ACUNIT_NM, ACUNIT.ACUNIT_ABBR_NM, ACUNIT.COMP_CD,
   
    COMP.COMP_NM, COMP.COMP_ABBR_NM,
   
    ACNT.ACNT_NM, ACNT.ACNT_ENG_NM

FROM
    BIDWADM_CO.OD_FI_SLP_D AS SLP

    LEFT JOIN
        BIDWADM_CO.OD_CO_ACUNIT_M AS ACUNIT
        ON SLP.ACUNIT_CD = ACUNIT.ACUNIT_CD

    LEFT JOIN
        BIDWADM_CO.OD_CO_COMP_M AS COMP
        ON ACUNIT.COMP_CD = COMP.COMP_CD

    LEFT JOIN
        BIDWADM_CO.OD_FI_ACNT_M AS ACNT
        ON SLP.ACUNIT_CD = ACNT.ACUNIT_CD AND SLP.ACNT_CD = ACNT.ACNT_CD

WHERE
    SLP.ACNT_CD LIKE 'A101%'
    AND SLP.APRV_YN = 'Y'
    AND ACUNIT.USE_YN = 'Y'
    AND COMP.COMP_CD LIKE 'D%'
    AND COMP.COMP_ABBR_NM NOT IN ('PI', 'MAG') 
```

## Key diagnosis 

INNER JOIN
- Returns only the rows that match in both tables
- Non-matching rows are excluded

LEFT JOIN
- Returns all rows from the left table, plus matched rows from the right
- If there's no match, right-side columns become NULL

LEFT JOINs ar null-rejected by WHERE filters => they behave like INNER JOINs 
So, Declare them INNER JOINs

``` sql
SELECT
    SLP.ACUNIT_CD, SLP.SLP_NO, SLP.SLP_LNO, SLP.SLP_TP_CD, SLP.SLP_JOUR_TP_CD, SLP.ACNT_CD,
    SLP.CRNCY_CD, SLP.DR_AMT, SLP.CR_AMT, SLP.COMP_CRNCY_CD, SLP.COMP_CRNCY_DR_AMT, SLP.COMP_CRNCY_CR_AMT,
    SLP.APRV_DT, SLP.REG_DTTM, SLP.MOD_DTTM,
    TO_DATE(SLP.SLP_DT, 'YYYYMMDD') AS SLP_DT,
    ACUNIT.ACUNIT_NM, ACUNIT.ACUNIT_ABBR_NM, ACUNIT.COMP_CD,
    COMP.COMP_NM, COMP.COMP_ABBR_NM,
    ACNT.ACNT_NM, ACNT.ACNT_ENG_NM
FROM BIDWADM_CO.OD_FI_SLP_D AS SLP
JOIN BIDWADM_CO.OD_CO_ACUNIT_M AS ACUNIT
  ON SLP.ACUNIT_CD = ACUNIT.ACUNIT_CD
 AND ACUNIT.USE_YN = 'Y'                            
JOIN BIDWADM_CO.OD_CO_COMP_M AS COMP
  ON ACUNIT.COMP_CD = COMP.COMP_CD
 AND COMP.COMP_CD LIKE 'D%'                       
 AND COALESCE(COMP.COMP_ABBR_NM, '') NOT IN ('PI','MAG')
JOIN BIDWADM_CO.OD_FI_ACNT_M AS ACNT
  ON SLP.ACUNIT_CD = ACNT.ACUNIT_CD
 AND SLP.ACNT_CD   = ACNT.ACNT_CD
WHERE
  SLP.ACNT_CD LIKE 'A101%'
  AND SLP.APRV_YN = 'Y';

```


